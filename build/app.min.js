var stk=function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(5);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var r=i(6);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(7);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var r=i(8);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=i(3),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(r),a=function e(){n(this,e),this.master=new s.Master};window.onload=function(){new a}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Master=void 0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(0),a=i(1),o=i(9),c=function(){function e(){n(this,e),this.timer=new s.Timer,this.canvas=new a.Canvas,this.scene=new o.Scene,this.paused=!1,this.loop()}return r(e,[{key:"update",value:function(e){this.scene.update(e),this.canvas.draw(this.scene.actors,this.scene.particles)}},{key:"loop",value:function(){var e=this;this.paused||(window.requestAnimationFrame(function(){e.loop()}),this.update(this.timer.update()))}}]),e}();t.Master=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(){n(this,e),this.time=(new Date).getTime()}return r(e,[{key:"update",value:function(){var e=(new Date).getTime(),t=(e-this.time)/1e3;return this.time=e,t}}]),e}();t.Timer=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){return Math.random()*e-e/2},a=function(){function e(t,i){n(this,e),this.x=t,this.y=i}return r(e,[{key:"set",value:function(e){this.x=e.x,this.y=e.y}}]),e}();t.Random=s,t.Vector=a},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(){var t=this;n(this,e),this.cvs=document.createElement("canvas"),this.ctx=this.cvs.getContext("2d"),this.resize(),this.setStyle(),document.body.appendChild(this.cvs),window.addEventListener("resize",function(){t.resize()})}return r(e,[{key:"draw",value:function(e,t){this.clear();for(var i=0,n=e.length;i<n;++i){var r=e[i];this.toScreenSpace(r.position),0==r.path?Math.sin(550*r.proxy.y):Math.sin(550*r.proxy.y),r.image.width,r.image.height;this.drawImage(r.image,100,100),this.drawImage(r.alt,200,200)}this.ctx.fillStyle="#222";for(var i=0,n=t.length;i<n;++i)t[i].draw(this.ctx)}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.cvs.width,this.cvs.height)}},{key:"drawImage",value:function(e,t,i,n,r){this.ctx.drawImage(e,t,i,n,r)}},{key:"toScreenSpace",value:function(e){return{x:1e3*e.x-500,y:500*e.y-250}}},{key:"resize",value:function(){this.cvs.width=window.innerWidth,this.cvs.height=window.innerHeight,this.redrawOverlay=!0}},{key:"setStyle",value:function(){this.cvs.style.position="fixed",this.cvs.style.top=0,this.cvs.style.left=0,this.cvs.style.border="1px solid red",this.cvs.style.zIndex=9999,this.cvs.style.pointerEvents="none"}}]),e}();t.Canvas=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(){n(this,e),this.path=templateDirectory+"/future-of-elections/images/",this.images=[],this.load()}return r(e,[{key:"loadImage",value:function(e){var t=this,i=new Image;i.onload=function(){t.hasLoaded+=1,t.toLoad<=t.hasLoaded&&(t.loaded=!0)},i.src=this.path+e,this.images.push(i)}},{key:"getRandomImage",value:function(e){var t=2*Math.floor(4*Math.random()),i=e%2==0?8:0;return{image:this.images[t+i],alt:this.images[t+i+1]}}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){this.loaded=!1,this.toLoad=16,this.hasLoaded=0,this.loadImage("figure_1_L_1.png"),this.loadImage("figure_1_L_2.png"),this.loadImage("figure_2_L_1.png"),this.loadImage("figure_2_L_2.png"),this.loadImage("figure_3_L_1.png"),this.loadImage("figure_3_L_2.png"),this.loadImage("figure_4_L_1.png"),this.loadImage("figure_4_L_2.png"),this.loadImage("figure_1_R_1.png"),this.loadImage("figure_1_R_2.png"),this.loadImage("figure_2_R_1.png"),this.loadImage("figure_2_R_2.png"),this.loadImage("figure_3_R_1.png"),this.loadImage("figure_3_R_2.png"),this.loadImage("figure_4_R_1.png"),this.loadImage("figure_4_R_2.png")}}]),e}();t.Images=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(10);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Scene=void 0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(11),a=i(12),o=i(13),c=i(1),u=function(){function e(){n(this,e),this.images=new c.Images,this.transformer=new o.Transformer,this.initScene()}return r(e,[{key:"initScene",value:function(){this.actors=[];for(var e=0;e<80;e++){var t=new s.Actor(e,80);t.setImage(this.images.getRandomImage(e)),this.actors.push(t)}this.particles=[];for(var e=0;e<80;e++)this.particles.push(new a.Particle)}},{key:"update",value:function(e){this.transformer.update();for(var t=this.transformer.getBoost(),i=0,n=this.particles.length;i<n;++i)this.particles[i].update(e);for(var i=0,n=this.actors.length;i<n;++i){var r=this.actors[i];r.update(e,t),r.position.set(this.transformer.getNextPosition(r.proxy.x,r.proxy.y,r.path))}}}]),e}();t.Scene=u},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Actor=void 0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(0),a=function(){function e(t,i){n(this,e),this.path=t%2==0?0:1,this.position=new s.Vector(0,0),this.proxy=new s.Vector(0==this.path?t/i:1-t/i,t/i),this.speed=new s.Vector(0==this.path?.008:-.008,.008)}return r(e,[{key:"setImage",value:function(e){this.image=e.image,this.alt=e.alt}},{key:"update",value:function(e,t){this.proxy.x+=e*(this.speed.x+t),this.proxy.y+=e*this.speed.y,this.proxy.x=this.proxy.x>1?this.proxy.x%1:this.proxy.x<0?1- -1*actor.proxy.x%1:this.proxy.x,this.proxy.y=this.proxy.y>1?this.proxy.y%1:this.proxy.y}}]),e}();t.Actor=a},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(){n(this,e),this.x=window.innerWidth*Math.random(),this.y=window.innerHeight*Math.random(),this.size=.8*Math.random()*1.5,this.dir=-Math.random()*Math.PI*.4,this.speed=30*Math.random()+10,this.vec={x:Math.cos(this.dir)*this.speed,y:-Math.sin(this.dir)*this.speed}}return r(e,[{key:"update",value:function(e){this.x=(this.x+this.vec.x*e)%window.innerWidth,this.y=(this.y+this.vec.y*e)%window.innerHeight}},{key:"draw",value:function(e){e.fillRect(this.x,this.y,this.size,this.size)}}]),e}();t.Particle=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Transformer=void 0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(15),a=function(){function e(){var t=this;n(this,e),this.transition=new s.Transition,this.baseline=.5,this.PI2=2*Math.PI,this.PIHalf=Math.PI/2,window.addEventListener("hashchange",function(e){t.onHashChange()}),this.section=1,this.previous=0,this.onHashChange()}return r(e,[{key:"setSection",value:function(e){this.section=e}},{key:"trigger",value:function(e,t){this.section=e,this.previous=t,this.transition.reset(t<e?1:-1)}},{key:"update",value:function(e){this.transition.update(e)}},{key:"getBoost",value:function(){return this.transition.getBoost()}},{key:"getNextPosition",value:function(e,t,i){if(this.transition.isActive()){var n=this.getSectionTransform(e,t,i,this.section),r=this.getSectionTransform(e,t,i,this.previous);return n.x+=(r.x-n.x)*this.transition.factorSmooth,n.y+=(r.y-n.y)*this.transition.factorSmooth,n}return this.getSectionTransform(e,t,i,this.section)}},{key:"getSectionTransform",value:function(e,t,i,n){var r=0,s=0==i?-1:1,a={x:0,y:0};switch(n){case 0:case 1:a.y=this.baseline+.05*s,a.x=e;break;case 2:a.x=e,a.y=this.baseline+.05*s,a.x>.25&&a.x<.75&&(r=(a.x-.25)*this.PI2,a.y+=.18*s*Math.sin(r));break;case 3:a.y=this.baseline;var o,c,u;o=0==i?.2:.3,c=0==i?.8:.7,u=0==i?.3:.2,e<.5?(a.x=o+e/.5*(c-o),a.y-=e<.25?u*(e/.25):u-u*((e-.25)/.25)):(a.x=c-(e-.5)/.5*(c-o),a.y+=e<.75?u*((e-.5)/.25):u-u*((e-.75)/.25));break;case 4:e<.333?(r=3*e,a.x=.3*r-.3,a.y=.2-.5*r):e<.666?(r=3*(e-.333),a.x=.3*r,a.y=.5*r-.3):(r=3*(e-.666),a.x=.3-.6*r,a.y=.2),0==i&&(a.y=.5*-(a.y-.05)+.05,a.x*=.5),a.y+=this.baseline,a.x+=.5;break;case 5:a.x=e,a.y=this.baseline+(0==i?-.05:.05),a.x>.1&&a.x<.9&&(r=1.25*(a.x-.1)*this.PI,a.y+=.15*Math.sin(3*r*s));break;case 6:a.x=e,a.y=this.baseline+(0==i?.05:.15),a.x>.15&&a.x<.85&&(a.x<.5?a.y-=a.x-.15:a.y-=.35-(a.x-.5));break;case 7:a.x=e,a.y=0==i?.5*a.x+.25:.5*(1-a.x)+.25;break;case 8:a.x=e,a.y=this.baseline+(0==i?0:.1),a.x>.15&&a.x<.85&&(r=1.428*(a.x-.15)*this.PI,a.y+=-.25*Math.sin(r));break;case 9:r=0==i?.32:.22,a.x=.5+Math.cos(e*this.PI2+this.PIHalf)*r,a.y=this.baseline+Math.sin(e*this.PI2+this.PIHalf)*r;break;case 10:0==i?(r=.21*Math.sin(this.PIHalf-e*this.PIHalf),a.x=.5+Math.cos(3*e*this.PI2+this.PIHalf)*r,a.y=this.baseline+Math.sin(3*e*this.PI2+this.PIHalf)*r):(r=.22,a.x=.5+Math.cos(e*this.PI2+this.PIHalf)*r,a.y=this.baseline+Math.sin(e*this.PI2+this.PIHalf)*r);break;case 11:r=0==i?.28:.72,a.x=r+.18*Math.cos(e*this.PI2+this.PIHalf),a.y=this.baseline+.18*Math.sin(e*this.PI2+this.PIHalf);break;case 12:0==i?(r=.25,a.x=.5+Math.cos(e*this.PI2+this.PIHalf)*r,a.y=this.baseline+Math.sin(2*(e*this.PI2+this.PIHalf))*r):(r=.15,a.x=.5+Math.cos(e*this.PI2+this.PIHalf)*r,a.y=this.baseline+Math.sin(2*(e*this.PI2+this.PIHalf))*r);break;default:a.y=this.baseline+(0==i?-.05:.05),a.x=e}return a}},{key:"onHashChange",value:function(){var e=window.location.pathname;e.includes("refiguring-elections")?this.trigger(1,this.section):e.includes("free-fair-elections")?this.trigger(2,this.section):e.includes("public-passions")?this.trigger(3,this.section):e.includes("new-ecologies")?this.trigger(4,this.section):e.includes("communicative-abundance")?this.trigger(5,this.section):e.includes("philippines")?this.trigger(6,this.section):e.includes("without-democracy")?this.trigger(7,this.section):e.includes("signs-of-renewal")?this.trigger(8,this.section):e.includes("joy-of-founding")?this.trigger(10,this.section):e.includes("political-parties")?this.trigger(11,this.section):e.includes("extending-the-franchise")?this.trigger(12,this.section):this.trigger(1,this.section)}}]),e}();t.Transformer=a},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(){n(this,e),this.active=!1,this.span=2,this.time=0,this.factor=0,this.factorSin=0,this.factorSmooth=0,this.speedIncrease=.25,this.direction=1,this.PIHalf=Math.PI/2}return r(e,[{key:"isActive",value:function(){return this.active}},{key:"reset",value:function(e){this.active=!0,this.time=0,this.direction=e}},{key:"getBoost",value:function(){return this.active?this.factorSin*this.speedIncrease*this.direction:0}},{key:"update",value:function(e){this.active&&(this.time+=e,this.factor=this.time/this.span,this.factorSin=Math.sin(this.factor*Math.PI),this.factorSmooth=Math.sin(this.factor*this.PIHalf),this.time>this.span&&(this.active=!1,this.time=0))}}]),e}();t.Transition=s}]);