var stk=function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(5);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var s=i(6);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(7);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var s=i(8);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=i(3),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(s),a=function e(){n(this,e),this.master=new r.Master};window.onload=function(){new a}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Master=void 0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(0),a=i(1),o=i(9),c=function(){function e(){n(this,e),this.timer=new r.Timer,this.canvas=new a.Canvas,this.scene=new o.Scene,this.paused=!1,this.loop()}return s(e,[{key:"update",value:function(e){this.scene.update(e),this.canvas.draw(this.scene.actors,this.scene.particles)}},{key:"loop",value:function(){var e=this;this.paused||(window.requestAnimationFrame(function(){e.loop()}),this.update(this.timer.update()))}}]),e}();t.Master=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){n(this,e),this.time=(new Date).getTime()}return s(e,[{key:"update",value:function(){var e=(new Date).getTime(),t=(e-this.time)/1e3;return this.time=e,t}}]),e}();t.Timer=r},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(e){return Math.random()*e-e/2},a=function(){function e(t,i){n(this,e),this.x=t,this.y=i}return s(e,[{key:"setVector",value:function(e){this.x=e.x,this.y=e.y}}]),e}();t.Random=r,t.Vector=a},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){var t=this;n(this,e),this.cvs=document.createElement("canvas"),this.ctx=this.cvs.getContext("2d"),this.resize(),this.setStyle(),document.body.appendChild(this.cvs),window.addEventListener("resize",function(){t.resize()})}return s(e,[{key:"draw",value:function(e,t){this.clear();for(var i=0,n=e.length;i<n;++i){var s=e[i],r=this.toScreenSpace(s.position),a=0==s.path?2*Math.sin(550*s.proxy.y)-2:2-2*Math.sin(550*s.proxy.y),o=s.image.width*s.scale,c=s.image.height*s.scale;s.position.x<.05||s.position.x>.95?this.ctx.globalAlpha=s.position.x<.05?s.position.x/.05:1-(s.position.x-.95)/.05:this.ctx.globalAlpha=1,this.drawImage(s.image,r.x-o/2,r.y-c/2,o,c),this.drawImage(s.alt,r.x+a-o/2,r.y-c/2,o,c)}this.ctx.globalAlpha=1,this.ctx.fillStyle="#888";for(var i=0,n=t.length;i<n;++i)t[i].draw(this.ctx)}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.cvs.width,this.cvs.height)}},{key:"drawImage",value:function(e,t,i,n,s){this.ctx.drawImage(e,t,i,n,s)}},{key:"toScreenSpace",value:function(e){return{x:this.centreX-this.centreRadiusX+e.x*this.centreSpanX,y:this.centreY-this.centreRadiusY+e.y*this.centreSpanY}}},{key:"resize",value:function(){this.cvs.width=window.innerWidth,this.cvs.height=window.innerHeight,this.centreX=window.innerWidth/2,this.centreY=window.innerHeight/2,this.centreSpanX=window.innerWidth<700?450:1e3,this.centreSpanY=this.centreSpanX/2,this.centreRadiusX=this.centreSpanX/2,this.centreRadiusY=this.centreSpanY/2}},{key:"setStyle",value:function(){this.cvs.style.position="fixed",this.cvs.style.top=0,this.cvs.style.left=0,this.cvs.style.zIndex=10,this.cvs.style.pointerEvents="none",this.cvs.style.width="100vw",this.cvs.style.height="100vh"}}]),e}();t.Canvas=r},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){n(this,e),this.path=templateDirectory+"/future-of-elections/images/",this.images=[],this.load()}return s(e,[{key:"loadImage",value:function(e){var t=this,i=new Image;i.onload=function(){t.hasLoaded+=1,t.toLoad<=t.hasLoaded&&(t.loaded=!0)},i.src=this.path+e,this.images.push(i)}},{key:"getRandomImage",value:function(e){var t=2*Math.floor(4*Math.random()),i=e%2==0?8:0;return{image:this.images[t+i],alt:this.images[t+i+1]}}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){this.loaded=!1,this.toLoad=16,this.hasLoaded=0,this.loadImage("figure_1_L_1.png"),this.loadImage("figure_1_L_2.png"),this.loadImage("figure_2_L_1.png"),this.loadImage("figure_2_L_2.png"),this.loadImage("figure_3_L_1.png"),this.loadImage("figure_3_L_2.png"),this.loadImage("figure_4_L_1.png"),this.loadImage("figure_4_L_2.png"),this.loadImage("figure_1_R_1.png"),this.loadImage("figure_1_R_2.png"),this.loadImage("figure_2_R_1.png"),this.loadImage("figure_2_R_2.png"),this.loadImage("figure_3_R_1.png"),this.loadImage("figure_3_R_2.png"),this.loadImage("figure_4_R_1.png"),this.loadImage("figure_4_R_2.png")}}]),e}();t.Images=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(10);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Scene=void 0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(11),a=i(12),o=i(13),c=i(1),u=function(){function e(){n(this,e),this.images=new c.Images,this.transformer=new o.Transformer(jQuery),this.initScene()}return s(e,[{key:"initScene",value:function(){var e=80;this.actors=[];for(var t=0;t<e;++t){var i=new r.Actor(t,e);i.setImage(this.images.getRandomImage(t)),this.actors.push(i)}e=30,this.particles=[];for(var t=0;t<e;t++)this.particles.push(new a.Particle)}},{key:"update",value:function(e){this.transformer.update(e);for(var t=(this.transformer.getBoost(),0),i=this.particles.length;t<i;++t)this.particles[t].update(e);for(var t=0,i=this.actors.length;t<i;++t){var n=this.actors[t];n.update(e,this.transformer.getBoost()),n.position.setVector(this.transformer.getNextPosition(n.proxy.x,n.proxy.y,n.path))}}}]),e}();t.Scene=u},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Actor=void 0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(0),a=function(){function e(t,i){n(this,e),this.scale=window.innerWidth<700?.75:1,this.path=t%2==0?0:1,this.position=new r.Vector(0,0),this.proxy=new r.Vector(0==this.path?t/i:1-t/i,t/i),this.speed=new r.Vector(0==this.path?.008:-.008,.008)}return s(e,[{key:"setImage",value:function(e){this.image=e.image,this.alt=e.alt}},{key:"update",value:function(e,t){this.proxy.x+=e*(this.speed.x+t),this.proxy.y+=e*this.speed.y,this.proxy.x=this.proxy.x>1?this.proxy.x%1:this.proxy.x<0?1- -1*this.proxy.x%1:this.proxy.x,this.proxy.y=this.proxy.y>1?this.proxy.y%1:this.proxy.y}}]),e}();t.Actor=a},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){n(this,e),this.x=window.innerWidth*Math.random(),this.y=window.innerHeight*Math.random(),this.size=.8*Math.random()*1.5,this.dir=-Math.random()*Math.PI*.4,this.speed=30*Math.random()+10,this.vec={x:Math.cos(this.dir)*this.speed,y:-Math.sin(this.dir)*this.speed}}return s(e,[{key:"update",value:function(e){this.x=(this.x+this.vec.x*e)%window.innerWidth,this.y=(this.y+this.vec.y*e)%window.innerHeight}},{key:"draw",value:function(e){e.fillRect(this.x,this.y,this.size,this.size)}}]),e}();t.Particle=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Transformer=void 0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(15),a=function(){function e(t){var i=this;n(this,e),this.transition=new r.Transition,this.baseline=.5,this.PI2=2*Math.PI,this.PIHalf=Math.PI/2,t(".menu-item a").on("click",function(e){i.parseText(e.currentTarget.href,!1)}),t(window).on("hashchange",function(){i.onHashChange()}),this.section=1,this.previous=0,this.onHashChange()}return s(e,[{key:"trigger",value:function(e,t){this.section=e,this.previous=t,this.transition.reset(t<e?1:-1)}},{key:"update",value:function(e){this.transition.update(e)}},{key:"getBoost",value:function(){return this.transition.getBoost()}},{key:"getNextPosition",value:function(e,t,i){if(this.transition.isActive()){var n=this.getSectionTransform(e,t,i,this.section),s=this.getSectionTransform(e,t,i,this.previous);return n.x+=(s.x-n.x)*(1-this.transition.factorSmooth),n.y+=(s.y-n.y)*(1-this.transition.factorSmooth),n}return this.getSectionTransform(e,t,i,this.section)}},{key:"getSectionTransform",value:function(e,t,i,n){var s=0,r=0==i?-1:1,a={x:0,y:0};switch(n){case 0:case 1:a.x=e,a.y=this.baseline+.05*r;break;case 2:a.x=e,a.y=this.baseline+.05*r,a.x>.25&&a.x<.75&&(s=(a.x-.25)*this.PI2,a.y+=.18*r*Math.sin(s));break;case 3:a.y=this.baseline;var o,c,u;o=0==i?.2:.3,c=0==i?.8:.7,u=0==i?.3:.2,e<.5?(a.x=o+e/.5*(c-o),a.y-=e<.25?u*(e/.25):u-u*((e-.25)/.25)):(a.x=c-(e-.5)/.5*(c-o),a.y+=e<.75?u*((e-.5)/.25):u-u*((e-.75)/.25));break;case 4:e<.333?(s=3*e,a.x=.3*s-.3,a.y=.2-.5*s):e<.666?(s=3*(e-.333),a.x=.3*s,a.y=.5*s-.3):(s=3*(e-.666),a.x=.3-.6*s,a.y=.2),0==i&&(a.y=.5*-(a.y-.05)+.05,a.x*=.5),a.y+=this.baseline,a.x+=.5;break;case 5:a.x=e,a.y=this.baseline+(0==i?-.05:.05),a.x>.1&&a.x<.9&&(s=1.25*(a.x-.1)*Math.PI,a.y+=.15*Math.sin(3*s*r));break;case 6:a.x=e,a.y=this.baseline+(0==i?.05:.15),a.x>.15&&a.x<.85&&(a.x<.5?a.y-=a.x-.15:a.y-=.35-(a.x-.5));break;case 7:a.x=e,a.y=0==i?.5*a.x+.25:.5*(1-a.x)+.25;break;case 8:a.x=e,a.y=this.baseline+(0==i?0:.1),a.x>.15&&a.x<.85&&(s=1.428*(a.x-.15)*Math.PI,a.y+=-.25*Math.sin(s));break;case 9:s=0==i?.32:.22,a.x=.5+Math.cos(e*this.PI2+this.PIHalf)*s,a.y=this.baseline+Math.sin(e*this.PI2+this.PIHalf)*s;break;case 10:0==i?(s=.21*Math.sin(this.PIHalf-e*this.PIHalf),a.x=.5+Math.cos(3*e*this.PI2+this.PIHalf)*s,a.y=this.baseline+Math.sin(3*e*this.PI2+this.PIHalf)*s):(s=.22,a.x=.5+Math.cos(e*this.PI2+this.PIHalf)*s,a.y=this.baseline+Math.sin(e*this.PI2+this.PIHalf)*s);break;case 11:s=0==i?.28:.72,a.x=s+.18*Math.cos(e*this.PI2+this.PIHalf),a.y=this.baseline+.18*Math.sin(e*this.PI2+this.PIHalf);break;case 12:0==i?(s=.25,a.x=.5+Math.cos(e*this.PI2+this.PIHalf)*s,a.y=this.baseline+Math.sin(2*(e*this.PI2+this.PIHalf))*s):(s=.15,a.x=.5+Math.cos(e*this.PI2+this.PIHalf)*s,a.y=this.baseline+Math.sin(2*(e*this.PI2+this.PIHalf))*s);break;default:a.y=this.baseline+(0==i?-.05:.05),a.x=e}return a}},{key:"parseText",value:function(e,t){e.includes("refiguring-elections")?this.trigger(1,this.section):e.includes("free-fair-elections")?this.trigger(2,this.section):e.includes("public-passions")?this.trigger(3,this.section):e.includes("new-ecologies")?this.trigger(4,this.section):e.includes("communicative-abundance")?this.trigger(5,this.section):e.includes("philippines")?this.trigger(6,this.section):e.includes("without-democracy")?this.trigger(7,this.section):e.includes("signs-of-renewal")?this.trigger(8,this.section):e.includes("joy-of-founding")?this.trigger(10,this.section):e.includes("political-parties")?this.trigger(11,this.section):e.includes("extending-the-franchise")?this.trigger(12,this.section):t&&this.trigger(1,this.section)}},{key:"onHashChange",value:function(){this.parseText(window.location.pathname,!0)}},{key:"test",value:function(){this.trigger((this.section+1)%13,this.section)}}]),e}();t.Transformer=a},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){n(this,e),this.active=!1,this.span=2,this.time=0,this.factor=0,this.factorSin=0,this.factorSmooth=0,this.speedIncrease=.25,this.direction=1,this.PIHalf=Math.PI/2}return s(e,[{key:"isActive",value:function(){return this.active}},{key:"reset",value:function(e){this.active=!0,this.time=0,this.direction=e}},{key:"getBoost",value:function(){return this.active?this.factorSin*this.speedIncrease*this.direction:0}},{key:"update",value:function(e){this.active&&(this.time+=e,this.factor=this.time/this.span,this.factorSin=Math.sin(this.factor*Math.PI),this.factorSmooth=Math.sin(this.factor*this.PIHalf),this.time>this.span&&(this.active=!1,this.time=0))}}]),e}();t.Transition=r}]);