var stk=function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(5);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var s=i(6);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var s=i(8);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=i(3),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),a=function t(){n(this,t),this.master=new r.Master};window.onload=function(){new a}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Master=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(0),a=i(1),o=i(9),c=function(){function t(){n(this,t),this.timer=new r.Timer,this.canvas=new a.Canvas,this.scene=new o.Scene,this.paused=!1,this.loop()}return s(t,[{key:"update",value:function(t){this.scene.update(t),this.canvas.draw(this.scene.actors,this.scene.particles)}},{key:"loop",value:function(){var t=this;this.paused||(window.requestAnimationFrame(function(){t.loop()}),this.update(this.timer.update()))}}]),t}();e.Master=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){n(this,t),this.time=(new Date).getTime()}return s(t,[{key:"update",value:function(){var t=(new Date).getTime(),e=(t-this.time)/1e3;return this.time=t,e}}]),t}();e.Timer=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){return Math.random()*t-t/2},a=function(){function t(e,i){n(this,t),this.x=e,this.y=i}return s(t,[{key:"setVector",value:function(t){this.x=t.x,this.y=t.y}}]),t}();e.Random=r,e.Vector=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){var e=this;n(this,t),this.cvs=document.createElement("canvas"),this.ctx=this.cvs.getContext("2d"),this.resize(),this.setStyle(),document.body.appendChild(this.cvs),window.addEventListener("resize",function(){e.resize()}),setTimeout(function(){e.fadeIn()},500)}return s(t,[{key:"fadeIn",value:function(){jQuery("canvas").css({opacity:.75})}},{key:"draw",value:function(t,e){this.clear();for(var i=0,n=t.length;i<n;++i){var s=t[i],r=this.toScreenSpace(s.position),a=0==s.path?2*Math.sin(550*s.proxy.y)-2:2-2*Math.sin(550*s.proxy.y),o=s.image.width*s.scale,c=s.image.height*s.scale;s.position.x<.05||s.position.x>.95?this.ctx.globalAlpha=s.position.x<.05?s.position.x/.05:1-(s.position.x-.95)/.05:this.ctx.globalAlpha=1,this.drawImage(s.image,r.x-o/2,r.y-c/2,o,c),this.drawImage(s.alt,r.x+a-o/2,r.y-c/2,o,c)}this.ctx.globalAlpha=1,this.ctx.fillStyle="#888";for(var i=0,n=e.length;i<n;++i)e[i].draw(this.ctx)}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.cvs.width,this.cvs.height)}},{key:"drawImage",value:function(t,e,i,n,s){this.ctx.drawImage(t,e,i,n,s)}},{key:"toScreenSpace",value:function(t){return{x:this.centreX-this.centreRadiusX+t.x*this.centreSpanX,y:this.centreY-this.centreRadiusY+t.y*this.centreSpanY}}},{key:"resize",value:function(){this.cvs.width=window.innerWidth,this.cvs.height=window.innerHeight,this.centreX=window.innerWidth/2,this.centreY=window.innerHeight/2,this.centreSpanX=window.innerWidth<700?450:1e3,this.centreSpanY=this.centreSpanX/2,this.centreRadiusX=this.centreSpanX/2,this.centreRadiusY=this.centreSpanY/2}},{key:"setStyle",value:function(){this.cvs.style.opacity=0,this.cvs.style.transition="opacity 1s",this.cvs.style.position="fixed",this.cvs.style.top=0,this.cvs.style.left=0,this.cvs.style.zIndex=10,this.cvs.style.pointerEvents="none",this.cvs.style.width="100vw",this.cvs.style.height="100vh"}}]),t}();e.Canvas=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){n(this,t),this.path=templateDirectory+"/future-of-elections/images/",this.images=[],this.load()}return s(t,[{key:"loadImage",value:function(t){var e=this,i=new Image;i.onload=function(){e.hasLoaded+=1,e.toLoad<=e.hasLoaded&&(e.loaded=!0)},i.src=this.path+t,this.images.push(i)}},{key:"getRandomImage",value:function(t){var e=2*Math.floor(4*Math.random()),i=t%2==0?8:0;return{image:this.images[e+i],alt:this.images[e+i+1]}}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){this.loaded=!1,this.toLoad=16,this.hasLoaded=0,this.loadImage("figure_1_L_1.png"),this.loadImage("figure_1_L_2.png"),this.loadImage("figure_2_L_1.png"),this.loadImage("figure_2_L_2.png"),this.loadImage("figure_3_L_1.png"),this.loadImage("figure_3_L_2.png"),this.loadImage("figure_4_L_1.png"),this.loadImage("figure_4_L_2.png"),this.loadImage("figure_1_R_1.png"),this.loadImage("figure_1_R_2.png"),this.loadImage("figure_2_R_1.png"),this.loadImage("figure_2_R_2.png"),this.loadImage("figure_3_R_1.png"),this.loadImage("figure_3_R_2.png"),this.loadImage("figure_4_R_1.png"),this.loadImage("figure_4_R_2.png")}}]),t}();e.Images=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(10);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(11),a=i(12),o=i(13),c=i(1),u=function(){function t(){n(this,t),this.images=new c.Images,this.transformer=new o.Transformer,this.initScene()}return s(t,[{key:"initScene",value:function(){var t=80;this.actors=[];for(var e=0;e<t;++e){var i=new r.Actor(e,t);i.setImage(this.images.getRandomImage(e)),this.actors.push(i)}t=30,this.particles=[];for(var e=0;e<t;e++)this.particles.push(new a.Particle)}},{key:"update",value:function(t){this.transformer.update(t);for(var e=(this.transformer.getBoost(),0),i=this.particles.length;e<i;++e)this.particles[e].update(t);for(var e=0,i=this.actors.length;e<i;++e){var n=this.actors[e];n.update(t,this.transformer.getBoost()),n.position.setVector(this.transformer.getNextPosition(n.proxy.x,n.proxy.y,n.path))}}}]),t}();e.Scene=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Actor=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(0),a=function(){function t(e,i){n(this,t),this.scale=window.innerWidth<700?.75:1,this.path=e%2==0?0:1,this.position=new r.Vector(0,0),this.proxy=new r.Vector(0==this.path?e/i:1-e/i,e/i),this.speed=new r.Vector(0==this.path?.008:-.008,.008)}return s(t,[{key:"setImage",value:function(t){this.image=t.image,this.alt=t.alt}},{key:"update",value:function(t,e){this.proxy.x+=t*(this.speed.x+e),this.proxy.y+=t*this.speed.y,this.proxy.x=this.proxy.x>1?this.proxy.x%1:this.proxy.x<0?1- -1*this.proxy.x%1:this.proxy.x,this.proxy.y=this.proxy.y>1?this.proxy.y%1:this.proxy.y}}]),t}();e.Actor=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){n(this,t),this.x=window.innerWidth*Math.random(),this.y=window.innerHeight*Math.random(),this.size=.8*Math.random()*1.5,this.dir=-Math.random()*Math.PI*.4,this.speed=30*Math.random()+10,this.vec={x:Math.cos(this.dir)*this.speed,y:-Math.sin(this.dir)*this.speed}}return s(t,[{key:"update",value:function(t){this.x=(this.x+this.vec.x*t)%window.innerWidth,this.y=(this.y+this.vec.y*t)%window.innerHeight}},{key:"draw",value:function(t){t.fillRect(this.x,this.y,this.size,this.size)}}]),t}();e.Particle=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(14);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Transformer=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(15),a=function(){function t(){var e=this;n(this,t),this.transition=new r.Transition,this.baseline=.5,this.PI2=2*Math.PI,this.PIHalf=Math.PI/2,jQuery(".menu-item a").on("click",function(t){e.parseText(t.currentTarget.href,!1)}),jQuery(window).on("hashchange",function(){e.onHashChange()}),this.section=1,this.previous=0,this.onHashChange()}return s(t,[{key:"trigger",value:function(t,e){this.section=t,this.previous=e,this.transition.reset(e<t?1:-1)}},{key:"update",value:function(t){this.transition.update(t)}},{key:"getBoost",value:function(){return this.transition.getBoost()}},{key:"getNextPosition",value:function(t,e,i){if(this.transition.isActive()){var n=this.getSectionTransform(t,e,i,this.section),s=this.getSectionTransform(t,e,i,this.previous);return n.x+=(s.x-n.x)*(1-this.transition.factorSmooth),n.y+=(s.y-n.y)*(1-this.transition.factorSmooth),n}return this.getSectionTransform(t,e,i,this.section)}},{key:"getSectionTransform",value:function(t,e,i,n){var s=0,r=0==i?-1:1,a={x:0,y:0};switch(n){case 0:case 1:a.x=t,a.y=this.baseline+.05*r;break;case 2:a.x=t,a.y=this.baseline+.05*r,a.x>.25&&a.x<.75&&(s=(a.x-.25)*this.PI2,a.y+=.18*r*Math.sin(s));break;case 3:a.y=this.baseline;var o,c,u;o=0==i?.2:.3,c=0==i?.8:.7,u=0==i?.3:.2,t<.5?(a.x=o+t/.5*(c-o),a.y-=t<.25?u*(t/.25):u-u*((t-.25)/.25)):(a.x=c-(t-.5)/.5*(c-o),a.y+=t<.75?u*((t-.5)/.25):u-u*((t-.75)/.25));break;case 4:t<.333?(s=3*t,a.x=.3*s-.3,a.y=.2-.5*s):t<.666?(s=3*(t-.333),a.x=.3*s,a.y=.5*s-.3):(s=3*(t-.666),a.x=.3-.6*s,a.y=.2),0==i&&(a.y=.5*-(a.y-.05)+.05,a.x*=.5),a.y+=this.baseline,a.x+=.5;break;case 5:a.x=t,a.y=this.baseline+(0==i?-.05:.05),a.x>.1&&a.x<.9&&(s=1.25*(a.x-.1)*Math.PI,a.y+=.15*Math.sin(3*s*r));break;case 6:a.x=t,a.y=this.baseline+(0==i?.05:.15),a.x>.15&&a.x<.85&&(a.x<.5?a.y-=a.x-.15:a.y-=.35-(a.x-.5));break;case 7:a.x=t,a.y=0==i?.5*a.x+.25:.5*(1-a.x)+.25;break;case 8:a.x=t,a.y=this.baseline+(0==i?0:.1),a.x>.15&&a.x<.85&&(s=1.428*(a.x-.15)*Math.PI,a.y+=-.25*Math.sin(s));break;case 9:s=0==i?.32:.22,a.x=.5+Math.cos(t*this.PI2+this.PIHalf)*s,a.y=this.baseline+Math.sin(t*this.PI2+this.PIHalf)*s;break;case 10:0==i?(s=.21*Math.sin(this.PIHalf-t*this.PIHalf),a.x=.5+Math.cos(3*t*this.PI2+this.PIHalf)*s,a.y=this.baseline+Math.sin(3*t*this.PI2+this.PIHalf)*s):(s=.22,a.x=.5+Math.cos(t*this.PI2+this.PIHalf)*s,a.y=this.baseline+Math.sin(t*this.PI2+this.PIHalf)*s);break;case 11:s=0==i?.28:.72,a.x=s+.18*Math.cos(t*this.PI2+this.PIHalf),a.y=this.baseline+.18*Math.sin(t*this.PI2+this.PIHalf);break;case 12:0==i?(s=.25,a.x=.5+Math.cos(t*this.PI2+this.PIHalf)*s,a.y=this.baseline+Math.sin(2*(t*this.PI2+this.PIHalf))*s):(s=.15,a.x=.5+Math.cos(t*this.PI2+this.PIHalf)*s,a.y=this.baseline+Math.sin(2*(t*this.PI2+this.PIHalf))*s);break;default:a.y=this.baseline+(0==i?-.05:.05),a.x=t}return a}},{key:"parseText",value:function(t,e){t.includes("refiguring-elections")?this.trigger(1,this.section):t.includes("free-fair-elections")?this.trigger(2,this.section):t.includes("public-passions")?this.trigger(3,this.section):t.includes("new-ecologies")?this.trigger(4,this.section):t.includes("communicative-abundance")?this.trigger(5,this.section):t.includes("philippines")?this.trigger(6,this.section):t.includes("without-democracy")?this.trigger(7,this.section):t.includes("signs-of-renewal")?this.trigger(8,this.section):t.includes("joy-of-founding")?this.trigger(10,this.section):t.includes("political-parties")?this.trigger(11,this.section):t.includes("extending-the-franchise")?this.trigger(12,this.section):e&&this.trigger(1,this.section)}},{key:"onHashChange",value:function(){this.parseText(window.location.pathname,!0)}},{key:"test",value:function(){this.trigger((this.section+1)%13,this.section)}}]),t}();e.Transformer=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){n(this,t),this.active=!1,this.span=2,this.time=0,this.factor=0,this.factorSin=0,this.factorSmooth=0,this.speedIncrease=.25,this.direction=1,this.PIHalf=Math.PI/2}return s(t,[{key:"isActive",value:function(){return this.active}},{key:"reset",value:function(t){this.active=!0,this.time=0,this.direction=t}},{key:"getBoost",value:function(){return this.active?this.factorSin*this.speedIncrease*this.direction:0}},{key:"update",value:function(t){this.active&&(this.time+=t,this.factor=this.time/this.span,this.factorSin=Math.sin(this.factor*Math.PI),this.factorSmooth=Math.sin(this.factor*this.PIHalf),this.time>this.span&&(this.active=!1,this.time=0))}}]),t}();e.Transition=r}]);